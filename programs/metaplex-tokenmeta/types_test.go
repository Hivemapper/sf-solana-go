package metaplex_tokenmeta

import (
	"encoding/hex"
	"fmt"
	"github.com/streamingfast/solana-go"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestD (t *testing.T) {

	hexStr := "047206981ade64d79ac1eaa825314cc3a8ff257f088826dd66a23da2bcfc4a5b2e784491b896244f11c6f12e793f00afeddc4ee45d9623b825139793ee804cd2080f000000537570657220506c616e746520393908000000706c616e2073796d1600000068747470733a2f2f6269742e6c792f3339623334366a0100000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	//hexStr := "04d50098c9fb058414c5ef3e5b374b7f35b580a83830f4ce8a1f5d4787dfc5b0aee63523d5948a8951eb39fef5e692d12a5f49bb2bf3bad6223cb652737c13739020000000466c756e6b20446f6e6b657920233332333000000000000000000000000000000a000000464c554e4b0000000000c800000068747470733a2f2f617277656176652e6e65742f5541534c5f365461596e4f6e67563976357a4f4267705948526b2d397a69673475733362417662655f6f4100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c010105000000c0117ed8cbd25dc84db7fae95d0d24e54df4b9bc2a3e10d94c5357db0e762c420100c74d7f256fc9ef9bb0db5daa0d5e8336a08de0935c6d4e8ac163d46caddd80610019f14dab6fda576fdb69c3bec678df9ddf80885c668baa75146cafb89d80a291dd00192a0954f040e7336bccf225903801f359be3a39357434644df80941a9dc48ef370019d50098c9fb058414c5ef3e5b374b7f35b580a83830f4ce8a1f5d4787dfc5b0ae0019010101ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	data, err := hex.DecodeString(hexStr)
	require.NoError(t, err)

	m := &Metadata{}
	err = m.Decode(data)
	require.NoError(t, err)

	fmt.Println("p:", solana.PublicKeyFromBytes(m.P[:]))
	fmt.Println("p2:", solana.PublicKeyFromBytes(m.P2[:]))
	fmt.Println("Name:", m.Data.Name)
	fmt.Println("Symbol:", m.Data.Symbol)
	fmt.Println("URI:", m.Data.URI)
	fmt.Println("SellerFeeBasisPoints:", m.Data.SellerFeeBasisPoints)
	//fmt.Println("UpdateAuthority:", solana.PublicKeyFromBytes(m.UpdateAuthority[:]).String())
}

func TestD2 (t *testing.T) {
	//hexStr := "5b374b7f35b580a83830f4ce8a1f5d4787dfc5b0aee63523d5948a8951eb39fef5e692d12a5f49bb2bf3bad6223cb652737c13739020000000466c756e6b20446f6e6b657920233332333000000000000000000000000000000a000000464c554e4b0000000000c800000068747470733a2f2f617277656176652e6e65742f5541534c5f365461596e4f6e67563976357a4f4267705948526b2d397a69673475733362417662655f6f4100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c010105000000c0117ed8cbd25dc84db7"
	hexStr := "04d50098c9fb058414c5ef3e5b374b7f35b580a83830f4ce8a1f5d4787dfc5b0aee63523d5948a8951eb39fef5e692d12a5f49bb2bf3bad6223cb652737c13739020000000466c756e6b20446f6e6b657920233332333000000000000000000000000000000a000000464c554e4b0000000000c800000068747470733a2f2f617277656176652e6e65742f5541534c5f365461596e4f6e67563976357a4f4267705948526b2d397a69673475733362417662655f6f4100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c010105000000c0117ed8cbd25dc84db7fae95d0d24e54df4b9bc2a3e10d94c5357db0e762c420100c74d7f256fc9ef9bb0db5daa0d5e8336a08de0935c6d4e8ac163d46caddd80610019f14dab6fda576fdb69c3bec678df9ddf80885c668baa75146cafb89d80a291dd00192a0954f040e7336bccf225903801f359be3a39357434644df80941a9dc48ef370019d50098c9fb058414c5ef3e5b374b7f35b580a83830f4ce8a1f5d4787dfc5b0ae0019010101ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	data, err := hex.DecodeString(hexStr)
	require.NoError(t, err)

	m := &Data{}
	err = m.Decode(data)
	require.NoError(t, err)

	//fmt.Println("Key:", m.Key)
	fmt.Println("Name:", m.Name)
	fmt.Println("Symbol:", m.Symbol)
	fmt.Println("URI:", m.URI)
	fmt.Println("SellerFeeBasisPoints:", m.SellerFeeBasisPoints)
	//fmt.Println("UpdateAuthority:", solana.PublicKeyFromBytes(m.UpdateAuthority[:]).String())
}

